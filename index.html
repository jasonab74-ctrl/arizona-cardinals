<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arizona Cardinals — News</title>

  <!-- PWA / icons (optional but harmless if present) -->
  <link rel="icon" href="static/favicon.ico">
  <link rel="apple-touch-icon" href="static/apple-touch-icon.png">
  <link rel="manifest" href="static/manifest.webmanifest">

  <!-- THE IMPORTANT PART: make sure the stylesheet path is correct -->
  <link rel="stylesheet" href="static/style.css?v=9" />
</head>
<body>
  <header class="hero hero-cards">
    <div class="brand">
      <img src="static/logo.png" alt="Arizona Cardinals logo" class="brand-logo" />
      <div class="brand-title">
        <h1>Arizona Cardinals — <span>News</span></h1>
        <div class="sub">Live feed • auto-updates</div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Quick links -->
    <nav class="quicklinks">
      <a class="pill" href="https://www.azcardinals.com/schedule/">Schedule</a>
      <a class="pill" href="https://www.azcardinals.com/team/players-roster/">Roster</a>
      <a class="pill" href="https://www.espn.com/nfl/team/depth/_/name/ari">Depth Chart</a>
      <a class="pill" href="https://www.azcardinals.com/team/injury-report/">Injury Report</a>
      <a class="pill" href="https://www.ticketmaster.com/arizona-cardinals-tickets/artist/805907">Tickets</a>
      <a class="pill" href="https://shop.azcardinals.com/">Team Shop</a>
      <a class="pill" href="https://www.reddit.com/r/azcardinals/">Reddit</a>
      <a class="pill" href="https://www.espn.com/nfl/team/_/name/ari/arizona-cardinals">ESPN Team</a>
      <a class="pill" href="https://sports.yahoo.com/nfl/teams/ari/">Yahoo Team</a>
      <a class="pill" href="https://www.pff.com/nfl/teams/arizona-cardinals">PFF Team Page</a>
      <a class="pill" href="https://www.pro-football-reference.com/teams/crd/">Pro-Football-Reference</a>
      <a class="pill" href="https://www.nfl.com/news/power-rankings">NFL Power Rankings</a>
      <a class="pill" href="https://www.teamrankings.com/nfl/team/arizona-cardinals">Stats</a>
      <a class="pill" href="https://www.espn.com/nfl/standings">Standings</a>
    </nav>

    <!-- Controls -->
    <section class="controls">
      <div class="control">
        <label for="sourceSel">Source:</label>
        <select id="sourceSel">
          <option value="all">All sources</option>
        </select>
      </div>
      <div class="control right">
        <label>Updated:</label>
        <span id="updated">—</span>
      </div>
    </section>

    <!-- Articles -->
    <section id="feed" class="feed"></section>

    <footer class="foot">
      <small>Powered by GitHub Pages</small>
    </footer>
  </main>

  <script>
    // Small helper to format dates
    function fmt(d) {
      try {
        return new Date(d).toLocaleString();
      } catch { return "—"; }
    }

    async function load() {
      let data;
      try {
        const res = await fetch('items.json?cache=' + Date.now());
        data = await res.json();
      } catch {
        // If items.json is missing, show a friendly message
        document.getElementById('feed').innerHTML =
          '<div class="empty">No articles yet — the collector will populate shortly.</div>';
        return;
      }

      // Updated at
      document.getElementById('updated').textContent =
        data.updated_at ? fmt(data.updated_at) : '—';

      // Build sources dropdown
      const sel = document.getElementById('sourceSel');
      (data.sources || []).forEach(s => {
        const opt = document.createElement('option');
        opt.value = s.id;
        opt.textContent = s.name;
        sel.appendChild(opt);
      });

      const render = () => {
        const chosen = sel.value;
        const feed = document.getElementById('feed');
        const items = (data.items || []).filter(x =>
          chosen === 'all' ? true : (x.source_id === chosen)
        );
        if (!items.length) {
          feed.innerHTML = '<div class="empty">No articles yet — the collector will populate shortly.</div>';
          return;
        }
        feed.innerHTML = items.map(x => `
          <article class="card">
            <a class="card-link" href="${x.link}" target="_blank" rel="noopener">
              <h3 class="card-title">${x.title}</h3>
              <div class="card-meta">${x.source} • ${fmt(x.published)}</div>
            </a>
          </article>
        `).join('');
      };

      sel.addEventListener('change', render);
      render();
    }
    load();
  </script>
</body>
</html>